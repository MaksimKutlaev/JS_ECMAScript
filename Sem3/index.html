<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sem3</title>
</head>
<body>

    <script>
        //Напишите функцию, которая возвращает цепочку прототипов для заданного объекта obj
        //Функция должна вернуть массив прототипов? начиная от самого объекта и заканчивая глобальным объектом
        function getPrototypeChain(obj) {
            const result = [obj];
            let proto = Object.getPrototypeOf(obj);
            while (condition) {
                result.push(proto);
                proto = Object.getPrototypeOf(proto);
            }
            return result
        }

        console.log(getPrototypeChain([1, 2, 3, 4]));

        //Напишите конструктор объекта Person, который принимает два аргумента:
        //name(строка и age(число). Конструктор должен создавать объект с указанными свойствами name и age


        function Person(name, age) {
            this.name = name;
            this.age = age;
        }

        Person.prototype.introduce = function() {
            console.log(`Меня звоут ${this.name} и мне ${this.age} лет`);
        }

        const person1 = new Person('Lohn', 25);
        person1.introduce();


        //

        class BankAccount {
            static bankName = 'GBank';

            constructor(accountNumber, balance) {
            this.balance = balance;
            }

            deposit(amount) {
                if (amount <=0 || amount === Infinity) {
                    throw new Error(`Неверная сумма`);
                }
                const splittedNumber = amount.toString().split('.');
                if (splittedNumber[1] && splittedNumber[1].length >2) {
                    throw new Error(`Неверная сумма`);
                }
                this.balance +=amount;
            }

            withdraw(amount) {
                if (amount <=0 || !Number.isFinite(amount)) {
                    throw new Error(`Неверная сумма`);
                }
                const splittedNumber = amount.toString().split('.');
                if (splittedNumber[1] && splittedNumber[1].length >2) {
                    throw new Error(`Неверная сумма`);
                }
                if (this.balance < amount) {
                    throw new Error(`Недостаточно средств на акк '${this.accountNumber}'`);
                }
                this.balance -= amount;
            }

            printBalance() {
                console.log(`${BankAccount.bankName} account '${this.accountNumber}' balance ${this.balance}`);
            }
        }

        const account1 = new BankAccount(1234567890, 1000);
        console.log(account1);
        account1.deposit(500);
        console.log(account1);
        account1.withdraw(300);
        console.log(account1);
        account1.withdraw(1500);
        console.log(account1);
        account1.withdraw(-200);
        console.log(account1);
        // try {
        //     account1.deposit(-500);
        //     console.log(account1);
        // } catch (error) {
        //     alert(`Возникла ошибка ${error.message}`)
        // }

        account1.deposit(Infinity);
        console.log(account1);
        account1.printBalance();
        account1.deposit(200.234);
        console.log(account1);
        


        //Создайте класс Animal

        class Animal {
            constructor(name) {
                this.name = name;
            }
            speak() {
                console.log(`${this.name} издает звук`);
            }
        }

        class Dog extends Animal {
            constructor(name, breed) {
                super(name);
                this.breed = breed;
            }
            fetch() {
                console.log(`${this.name} принес мяч`);
            }
        }

        function printName() {
            console.log(this.name);
        }

        const animal1 = new Animal('Животное');
        animal1.speak();
        const dog1 = new Dog('Бобик', 'Дворняга');
        console.log(dog1.breed);
        dog1.fetch();
        console.log(dog1);
        printName.call(animal1);
        printName.call(dog1, 5, 10);
        printName.apply(dog1, [5,10]);

    </script>
    
</body>
</html>